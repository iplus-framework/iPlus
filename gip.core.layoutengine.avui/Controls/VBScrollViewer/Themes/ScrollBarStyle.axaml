<ResourceDictionary
   xmlns="https://github.com/avaloniaui"
   xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
   xmlns:sys="using:System"
   xmlns:local="clr-namespace:gip.core.layoutengine.avui">

    <sys:Double x:Key="ScrollBarThickness">18</sys:Double>
    <sys:Double x:Key="SmallScrollBarThickness">9</sys:Double>
    <sys:Double x:Key="ScrollBarLineButtonExtent">16</sys:Double>
    <StaticResource x:Key="ScrollBarThumbMinimumExtent" ResourceKey="ScrollBarLineButtonExtent" />
    
    <QuinticEaseInOut x:Key="ScrollExpandEase"/>
    <sys:TimeSpan x:Key="ScrollExpandDuration">0:0:0.25</sys:TimeSpan>

    <ControlTheme x:Key="ScrollBarThumbBase" TargetType="Thumb">
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="Template">
            <ControlTemplate>
                <Border Background="#01000000">
                    <Border x:Name="Outer"
                            Classes="aeroState2"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            BorderThickness="{TemplateBinding BorderThickness}">
                        <Border x:Name="Inner"
                                Classes="aeroState2"
                                Background="{TemplateBinding Background}"
                                BorderBrush="{StaticResource ButtonIdleInnerBorderBrush}"
                                BorderThickness="1">
                            <StackPanel Classes="gripLines" Spacing="-1">
                                <Rectangle/>
                                <Rectangle/>
                                <Rectangle/>
                            </StackPanel>
                        </Border>
                    </Border>
                </Border>
            </ControlTemplate>
        </Setter>
        
        <Style Selector="^ /template/ Border#Outer">
            <Setter Property="CornerRadius" Value="3"/>
        </Style>
        <Style Selector="^ /template/ Border#Inner">
            <Setter Property="CornerRadius" Value="2"/>
        </Style>

        
        <Style Selector="^ /template/ StackPanel.gripLines">
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="{StaticResource ScrollExpandDuration}" />
                </Transitions>
            </Setter>
            <Setter Property="Opacity" Value="0.5" />
        </Style>
        <Style Selector="^.scrollBarHideLines /template/ StackPanel.gripLines">
            <Setter Property="Opacity" Value="0" />
        </Style>

        <Style Selector="^ /template/ StackPanel.gripLines > Rectangle">
            <Setter Property="Fill" Value="{StaticResource ScrollBarButtonForeground}" />
            <Setter Property="Stroke" Value="{StaticResource ScrollBarThumbIconStroke}" />
            <Setter Property="StrokeThickness" Value="1" />
        </Style>
    </ControlTheme>
    <ControlTheme x:Key="ScrollBarThumbVertical" TargetType="Thumb" BasedOn="{StaticResource ScrollBarThumbBase}">
        <Setter Property="MinHeight" Value="{StaticResource ScrollBarThumbMinimumExtent}"/>
        <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonIdleBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonIdleOuterBorderBrush}"/>

        <Style Selector="^ /template/ Border#Outer">
            <Setter Property="Margin" Value="1,0"/>
        </Style>

        <Style Selector="^ /template/ StackPanel.gripLines">
            <Setter Property="Orientation" Value="Vertical" />
            <Setter Property="HorizontalAlignment" Value="Stretch" />
            <Setter Property="VerticalAlignment" Value="Center" />
            <Setter Property="Margin" Value="1,0" />
        </Style>
        <Style Selector="^ /template/ StackPanel.gripLines > Rectangle">
            <Setter Property="Height" Value="4" />
        </Style>


        <!-- pointerover (hover) state -->
        <Style Selector="^:pointerover /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonHoverOuterBorderBrush}"/>
        </Style>
        <Style Selector="^:pointerover /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonHoverBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonHoverInnerBorderBrush}"/>
        </Style>


        <!-- pressed state -->
        <Style Selector="^:pressed /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonPressedOuterBorderBrush}"/>
        </Style>
        <Style Selector="^:pressed /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonPressedBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonPressedInnerBorderBrush}"/>
        </Style>


        <!-- disabled state -->
        <Style Selector="^:disabled /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonDisabledOuterBorderBrush}"/>
        </Style>
        <Style Selector="^:disabled /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonDisabledBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonDisabledInnerBorderBrush}"/>
        </Style>
    </ControlTheme>
    <ControlTheme x:Key="ScrollBarThumbHorizontal" TargetType="Thumb" BasedOn="{StaticResource ScrollBarThumbBase}">
        <Setter Property="MinWidth" Value="{StaticResource ScrollBarThumbMinimumExtent}"/>
        <Setter Property="Background" Value="{StaticResource ButtonIdleBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ButtonIdleOuterBorderBrush}"/>

        <Style Selector="^ /template/ Border#Outer">
            <Setter Property="Margin" Value="0,1"/>
        </Style>

        <Style Selector="^ /template/ StackPanel.gripLines">
            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Stretch" />
        </Style>
        <Style Selector="^ /template/ StackPanel.gripLines > Rectangle">
            <Setter Property="Width" Value="4" />
            <Setter Property="Margin" Value="0,1" />
        </Style>


        <!-- pointerover (hover) state -->
        <Style Selector="^:pointerover /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource ButtonHoverOuterBorderBrush}" />
        </Style>
        <Style Selector="^:pointerover /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource ButtonHoverBackground}" />
            <Setter Property="BorderBrush" Value="{StaticResource ButtonHoverInnerBorderBrush}" />
        </Style>


        <!-- pressed state -->
        <Style Selector="^:pressed /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource ButtonPressedOuterBorderBrush}" />
        </Style>
        <Style Selector="^:pressed /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource ButtonPressedBackground}" />
            <Setter Property="BorderBrush" Value="{StaticResource ButtonPressedInnerBorderBrush}" />
        </Style>


        <!-- disabled state -->
        <Style Selector="^:disabled /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource ButtonDisabledOuterBorderBrush}" />
        </Style>
        <Style Selector="^:disabled /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource ButtonDisabledBackground}" />
            <Setter Property="BorderBrush" Value="{StaticResource ButtonDisabledInnerBorderBrush}" />
        </Style>
        <Style Selector="^:disabled /template/ ContentPresenter#PART_ContentPresenter">
            <Setter Property="TextBlock.Foreground" Value="{StaticResource ButtonDisabledForeground}"/>
        </Style>
    </ControlTheme>
    
    
    <ControlTheme x:Key="ScrollBarPageButton" TargetType="RepeatButton">
        <Setter Property="Template">
            <ControlTemplate>
                <Border Background="#01000000" />
            </ControlTemplate>
        </Setter>
    </ControlTheme>


    <ControlTheme x:Key="ScrollBarLineButtonBase" TargetType="RepeatButton" BasedOn="{StaticResource {x:Type RepeatButton}}">
        <Setter Property="Transitions">
            <Transitions>
                <DoubleTransition Property="Width" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                <DoubleTransition Property="Height" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                <DoubleTransition Property="Opacity" Duration="{StaticResource ScrollExpandDuration}" />
            </Transitions>
        </Setter>
        
        <Style Selector="^ /template/ Panel">
            <Setter Property="Background" Value="#01000000" />
        </Style>

        <Style Selector="^:not(.scrollBarHideIdle) /template/ Border#Outer">
            <Style.Animations>
                <Animation FillMode="Both" Duration="{StaticResource ScrollExpandDuration}">
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="1.0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
        <Style Selector="^.scrollBarHideIdle /template/ Border#Outer">
            <Style.Animations>
                <Animation FillMode="Both" Duration="{StaticResource ScrollExpandDuration}">
                    <KeyFrame Cue="100%">
                        <Setter Property="Opacity" Value="0.0"/>
                    </KeyFrame>
                </Animation>
            </Style.Animations>
        </Style>
    </ControlTheme>
    <ControlTheme x:Key="ScrollBarLineButtonHorizontal" TargetType="RepeatButton" BasedOn="{StaticResource ScrollBarLineButtonBase}">
        <Setter Property="Width" Value="{StaticResource ScrollBarLineButtonExtent}" />
        <Setter Property="VerticalAlignment" Value="Stretch"/>

        <Style Selector="^ /template/ Border#Outer">
            <Setter Property="Margin" Value="0,1"/>
        </Style>
    </ControlTheme>
    <ControlTheme x:Key="ScrollBarLineButtonVertical" TargetType="RepeatButton" BasedOn="{StaticResource ScrollBarLineButtonBase}">
        <Setter Property="Height" Value="{StaticResource ScrollBarLineButtonExtent}" />
        <Setter Property="HorizontalAlignment" Value="Stretch"/>

        <Style Selector="^ /template/ Border#Outer">
            <Setter Property="Margin" Value="1,0"/>
        </Style>

        <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonIdleBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonIdleOuterBorderBrush}"/>


        <!-- pointerover (hover) state -->
        <Style Selector="^:pointerover /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonHoverOuterBorderBrush}"/>
        </Style>
        <Style Selector="^:pointerover /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonHoverBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonHoverInnerBorderBrush}"/>
        </Style>


        <!-- pressed state -->
        <Style Selector="^:pressed /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonPressedOuterBorderBrush}"/>
        </Style>
        <Style Selector="^:pressed /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonPressedBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonPressedInnerBorderBrush}"/>
        </Style>


        <!-- disabled state -->
        <Style Selector="^:disabled /template/ Border#Outer">
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonDisabledOuterBorderBrush}"/>
        </Style>
        <Style Selector="^:disabled /template/ Border#Inner">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarButtonDisabledBackground}"/>
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarButtonDisabledInnerBorderBrush}"/>
        </Style>
    </ControlTheme>

    
    <ControlTheme x:Key="ScrollBarStyle" TargetType="ScrollBar">
        <Setter Property="MinWidth" Value="{StaticResource ScrollBarThickness}"/>
        <Setter Property="MinHeight" Value="{StaticResource ScrollBarThickness}"/>

        <Style Selector="^:vertical">
            <Setter Property="Background" Value="{StaticResource VerticalScrollBarTrackBackground}" />
            <Setter Property="BorderBrush" Value="{StaticResource VerticalScrollBarTrackBorderBrush}" />
            <Setter Property="BorderThickness" Value="1,0" />
            <Setter Property="Template">
                <ControlTemplate>
                    <Border Background="#01000000">
                        <Border Classes="root">
                            <Grid RowDefinitions="Auto,*,Auto">
                                <Border Classes="expandedBackground"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        Grid.RowSpan="3"/>


                                <RepeatButton x:Name="PART_LineUpButton"
                                                Theme="{StaticResource ScrollBarLineButtonVertical}"
                                                Classes="lineButton"
                                                Classes.scrollBarHideIdle="{Binding !IsPointerOver, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                                Grid.Row="0"
                                                Focusable="False">
                                    <Path Data="M 0 4 L 8 4 L 4 0 Z" />
                                </RepeatButton>

                                <Track Grid.Row="1"
                                        Minimum="{TemplateBinding Minimum}"
                                        Maximum="{TemplateBinding Maximum}"
                                        Value="{TemplateBinding Value, Mode=TwoWay}"
                                        ViewportSize="{TemplateBinding ViewportSize}"
                                        Orientation="{TemplateBinding Orientation}"
                                        IsDirectionReversed="True">
                                    <Track.DecreaseButton>
                                        <RepeatButton x:Name="PART_PageUpButton"
                                                        Theme="{StaticResource ScrollBarPageButton}"
                                                        Focusable="False"/>
                                    </Track.DecreaseButton>
                                    <Track.IncreaseButton>
                                        <RepeatButton x:Name="PART_PageDownButton"
                                                        Theme="{StaticResource ScrollBarPageButton}"
                                                        Focusable="False"/>
                                    </Track.IncreaseButton>
                                    <Thumb Theme="{StaticResource ScrollBarThumbVertical}"
                                        Classes.scrollBarHideLines="{Binding !IsExpanded, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}" />
                                </Track>

                                <RepeatButton x:Name="PART_LineDownButton"
                                                Theme="{StaticResource ScrollBarLineButtonVertical}"
                                                Classes="lineButton"
                                                Classes.scrollBarHideIdle="{Binding !IsPointerOver, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                                Grid.Row="2"
                                                Focusable="False">
                                    <Path Data="M 0 0 L 4 4 L 8 0 Z" />
                                </RepeatButton>
                            </Grid>
                        </Border>
                    </Border>
                </ControlTemplate>
            </Setter>
        </Style>
        <Style Selector="^:horizontal">
            <Setter Property="Background" Value="{StaticResource HorizontalScrollBarTrackBackground}" />
            <Setter Property="BorderBrush" Value="{StaticResource HorizontalScrollBarTrackBorderBrush}" />
            <Setter Property="BorderThickness" Value="0,1" />
            <Setter Property="Template">
                <ControlTemplate>
                    <Border Background="#01000000">
                        <Border Classes="root">
                            <Grid ColumnDefinitions="Auto,*,Auto">
                                <Border Classes="expandedBackground"
                                        Background="{TemplateBinding Background}"
                                        BorderBrush="{TemplateBinding BorderBrush}"
                                        BorderThickness="{TemplateBinding BorderThickness}"
                                        Grid.ColumnSpan="3"/>


                                <RepeatButton x:Name="PART_LineUpButton"
                                                Theme="{StaticResource ScrollBarLineButtonHorizontal}"
                                                Classes="lineButton"
                                                Classes.scrollBarHideIdle="{Binding !IsPointerOver, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                                Grid.Column="0"
                                                Focusable="False">
                                    <Path Data="M 4 0 L 4 8 L 0 4 Z" />
                                </RepeatButton>

                                <Track Grid.Row="1"
                                        Grid.Column="1"
                                        Minimum="{TemplateBinding Minimum}"
                                        Maximum="{TemplateBinding Maximum}"
                                        Value="{TemplateBinding Value, Mode=TwoWay}"
                                        ViewportSize="{TemplateBinding ViewportSize}"
                                        Orientation="{TemplateBinding Orientation}">
                                    <Track.DecreaseButton>
                                        <RepeatButton x:Name="PART_PageUpButton"
                                                        Theme="{StaticResource ScrollBarPageButton}"
                                                        Focusable="False"/>
                                    </Track.DecreaseButton>
                                    <Track.IncreaseButton>
                                        <RepeatButton x:Name="PART_PageDownButton"
                                                        Theme="{StaticResource ScrollBarPageButton}"
                                                        Focusable="False"/>
                                    </Track.IncreaseButton>
                                    <Thumb Theme="{StaticResource ScrollBarThumbHorizontal}"
                                        Classes.scrollBarHideLines="{Binding !IsExpanded, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}" />
                                </Track>
                                
                                <RepeatButton x:Name="PART_LineDownButton"
                                                Theme="{StaticResource ScrollBarLineButtonHorizontal}"
                                                Classes="lineButton"
                                                Classes.scrollBarHideIdle="{Binding !IsPointerOver, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay}"
                                                Grid.Column="2"
                                                Focusable="False">
                                    <Path Data="M 0 0 L 4 4 L 0 8 Z" />
                                </RepeatButton>
                            </Grid>
                        </Border>
                    </Border>
                </ControlTemplate>
            </Setter>
        </Style>

        <Style Selector="^[AllowAutoHide=False] /template/ Border.repeatBackground">
            <Setter Property="IsVisible" Value="{Binding ViewportSize, RelativeSource={RelativeSource Mode=TemplatedParent}, Mode=OneWay, Converter={x:Static local:DoubleIsNaNConverter.IsNotNaN}}"/>
        </Style>
        <Style Selector="^[AllowAutoHide=False][Maximum=0] /template/ Border.repeatBackground,
                        ^[AllowAutoHide=True] /template/ Border.repeatBackground">
            <Setter Property="IsVisible" Value="False"/>
        </Style>


        <Style Selector="^ /template/ :is(Control).expandedBackground">
            <Setter Property="Opacity" Value="0"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Opacity" Duration="{StaticResource ScrollExpandDuration}" />
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="^[IsExpanded=True] /template/ :is(Control).expandedBackground">
            <Setter Property="Opacity" Value="1"/>
            <Setter Property="Margin" Value="0"/>
        </Style>
        

        <Style Selector="^:vertical /template/ :is(Control).root">
            <Setter Property="HorizontalAlignment" Value="Right"/>
            <Setter Property="Width" Value="{StaticResource SmallScrollBarThickness}"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Width" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                    <ThicknessTransition Property="Margin" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="^[IsExpanded=True]:vertical /template/ :is(Control).root">
            <Setter Property="Width" Value="{StaticResource ScrollBarThickness}"/>
        </Style>

        <Style Selector="^:horizontal /template/ :is(Control).root">
            <Setter Property="VerticalAlignment" Value="Bottom"/>
            <Setter Property="Height" Value="{StaticResource SmallScrollBarThickness}"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Height" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                    <ThicknessTransition Property="Margin" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="^[IsExpanded=True]:horizontal /template/ :is(Control).root">
            <Setter Property="Height" Value="{StaticResource ScrollBarThickness}"/>
        </Style>
        
        <Style Selector="^[IsExpanded=False] /template/ :is(Control).root">
            <Setter Property="Margin" Value="1"/>
        </Style>

        <Style Selector="^:horizontal /template/ Border.aeroState.pointerover">
            <Setter Property="Width" Value="{StaticResource ScrollBarThickness}"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Width" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="^[AllowAutoHide=True][IsExpanded=False]:horizontal /template/ Border.aeroState.pointerover">
            <Setter Property="Width" Value="0"/>
        </Style>

        <Style Selector="^:vertical /template/ Border.aeroState.pointerover">
            <Setter Property="Height" Value="{StaticResource ScrollBarThickness}"/>
            <Setter Property="Transitions">
                <Transitions>
                    <DoubleTransition Property="Height" Duration="{StaticResource ScrollExpandDuration}" Easing="{StaticResource ScrollExpandEase}" />
                </Transitions>
            </Setter>
        </Style>
        <Style Selector="^[AllowAutoHide=True][IsExpanded=False]:vertical /template/ Border.aeroState.pointerover">
            <Setter Property="Height" Value="0"/>
        </Style>
        
        <Style Selector="^[AllowAutoHide=True][IsExpanded=False] /template/ RepeatButton.lineButton">
            <Setter Property="Opacity" Value="0" />
        </Style>
        
        
        
        <Style Selector="^ /template/ RepeatButton.lineButton > Path">
            <Setter Property="Fill" Value="{StaticResource ScrollBarButtonForeground}" />
            <Setter Property="Stroke" Value="{StaticResource ScrollBarButtonIconStroke}"/>
            <Setter Property="StrokeThickness" Value="1"/>

            <Setter Property="HorizontalAlignment" Value="Center" />
            <Setter Property="VerticalAlignment" Value="Center" />
        </Style>
        <Style Selector="^:vertical /template/ RepeatButton.lineButton > Path">
            <Setter Property="Width" Value="8" />
            <Setter Property="Height" Value="4" />
            <Setter Property="Margin" Value="-4,2" />
        </Style>
        <Style Selector="^:horizontal /template/ RepeatButton.lineButton > Path">
            <Setter Property="Width" Value="4" />
            <Setter Property="Height" Value="8" />
            <Setter Property="Margin" Value="-2,-4" />
        </Style>
    </ControlTheme>

    <ControlTheme x:Key="{x:Type ScrollBar}" TargetType="{x:Type ScrollBar}" BasedOn="{StaticResource ScrollBarStyle}" />
    <ControlTheme x:Key="{x:Type local:VBScrollBar}" TargetType="{x:Type local:VBScrollBar}" BasedOn="{StaticResource ScrollBarStyle}"/>


</ResourceDictionary>
